<!DOCTYPE html>
<html lang="es"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>pc2webmap</title>

  <!-- ==========================
       LibrerÃ­as externas
  =========================== -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://unpkg.com/leaflet/dist/leaflet.css" rel="stylesheet">

  <!-- ==========================
       Estilos propios
  =========================== -->
  <link href="css/custom.css" rel="stylesheet">
</head>

<!-- 
  data-mode="producer" indica modo de trabajo.
  Al exportar, este atributo se reemplaza por data-mode="user".
-->
<body data-mode="user">

  <!-- =========================================================
       NAVBAR (modo productor)
       ========================================================= -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">

    <!-- ======================================================
         Marca / tÃ­tulo del proyecto
         ====================================================== -->
    <a class="navbar-brand fw-bold" href="#">pc2webmap</a>

    <!-- ======================================================
         BotÃ³n responsive (collapse en pantallas pequeÃ±as)
         ====================================================== -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- ======================================================
         Contenedor colapsable del menÃº
         ------------------------------------------------------
         El bloque con id="producer-tools" se usa para agrupar
         los botones que se ocultarÃ¡n al exportar a modo usuario.
         ====================================================== -->
    <div class="collapse navbar-collapse justify-content-end" id="navbarContent">
      
    </div>
  </div>
</nav>

  <!-- =========================================================
       CONTENIDO PRINCIPAL
       ========================================================= -->
  <main class="flex-fill">
    <div class="d-flex flex-row h-100">
      
      <!-- Panel lateral izquierdo -->
      <div id="sidebar" class="border-end bg-light p-2" style="width:300px; overflow-y:auto;">
        <h6 class="text-center text-muted">Capas disponibles</h6>
        <div id="layer-list" class="mt-3">
          <!-- Las capas se cargarÃ¡n dinÃ¡micamente desde /data/cache -->
        </div>
      </div>

      <!-- Contenedor del mapa -->
      <div class="flex-grow-1 position-relative">
        <div id="map" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" style="position: relative;" tabindex="0"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(0px, 0px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 19; transform: translate3d(0px, 0px, 0px) scale(1);"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/10/12.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(721px, 250px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/10/11.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(721px, 506px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/9/12.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(465px, 250px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/11/12.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(977px, 250px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/9/11.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(465px, 506px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/11/11.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(977px, 506px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/10/13.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(721px, -6px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/10/10.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(721px, 762px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/9/13.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(465px, -6px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/11/13.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(977px, -6px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/9/10.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(465px, 762px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/11/10.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(977px, 762px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/8/12.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(209px, 250px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/12/12.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1233px, 250px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/8/11.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(209px, 506px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/12/11.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1233px, 506px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/8/13.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(209px, -6px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/12/13.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1233px, -6px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/8/10.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(209px, 762px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/12/10.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1233px, 762px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/7/12.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-47px, 250px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/13/12.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1489px, 250px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/7/11.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-47px, 506px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/13/11.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1489px, 506px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/7/13.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-47px, -6px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/13/13.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1489px, -6px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/7/10.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-47px, 762px, 0px); opacity: 1;"><img alt="" src="https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/5/13/10.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1489px, 762px, 0px); opacity: 1;"></div></div></div><div class="leaflet-pane leaflet-overlay-pane"></div><div class="leaflet-pane leaflet-shadow-pane"></div><div class="leaflet-pane leaflet-marker-pane"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"></div><div class="leaflet-proxy leaflet-zoom-animated"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in" href="#" title="Zoom in" role="button" aria-label="Zoom in" aria-disabled="false"><span aria-hidden="true">+</span></a><a class="leaflet-control-zoom-out" href="#" title="Zoom out" role="button" aria-label="Zoom out" aria-disabled="false"><span aria-hidden="true">âˆ’</span></a></div></div><div class="leaflet-top leaflet-right"><div class="leaflet-control-layers leaflet-control" aria-haspopup="true"><a class="leaflet-control-layers-toggle" href="#" title="Layers" role="button"></a><section class="leaflet-control-layers-list"><div class="leaflet-control-layers-base"><label><span><input type="radio" class="leaflet-control-layers-selector" name="leaflet-base-layers_83" checked="checked"><span> Argenmap (IGN)</span></span></label><label><span><input type="radio" class="leaflet-control-layers-selector" name="leaflet-base-layers_83"><span> OpenStreetMap</span></span></label></div><div class="leaflet-control-layers-separator" style="display: none;"></div><div class="leaflet-control-layers-overlays"></div></section></div></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com" title="A JavaScript library for interactive maps"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"></path><path fill="#FFD500" d="M0 4h12v3H0z"></path><path fill="#E0BC00" d="M0 7h12v1H0z"></path></svg> Leaflet</a> <span aria-hidden="true">|</span> Â© <a href="https://www.ign.gob.ar/">Instituto GeogrÃ¡fico Nacional (IGN)</a> - Argenmap</div></div></div></div>
      </div>

    </div>
  </main>

  <!-- =========================================================
       FOOTER (modo productor)
       ========================================================= -->
  <footer class="bg-dark text-light text-center py-2 fixed-bottom">
    <small>Â© 2025 - pc2webmap</small>
</footer>

  <!-- =========================================================
       LIBRERÃAS JS
       ========================================================= -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- =========================================================
       SCRIPTS DEL PROYECTO
       ========================================================= -->
  <script src="js/map.js"></script>       <!-- InicializaciÃ³n del mapa -->
  <script src="js/producer.js"></script>   <!-- Control de modo productor / exportaciÃ³n -->

  <!-- =========================================================
       FIX: Ajustar mapa tras renderizado
       ========================================================= -->
  <script>
    // Este ajuste garantiza que Leaflet detecte el tamaÃ±o correcto
    // una vez que la pÃ¡gina estÃ¡ completamente cargada.
    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => {
        if (window.map && window.map.invalidateSize) {
          window.map.invalidateSize();
          console.log("ðŸ§­ Leaflet: tamaÃ±o del mapa ajustado correctamente.");
        }
      }, 500);
    });
  </script>



</body></html>